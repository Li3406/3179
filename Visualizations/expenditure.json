{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 400,
  "height": 300,
  "data": {
    "url": "https://raw.githubusercontent.com/Li3406/3179/main/Data/Extracted%20Data/expenditure.csv"
  },
  "transform": [
    {
      "calculate": "datum['expenditure_2023'] / 1000000",
      "as": "expenditure_2023"
    },
    {
      "calculate": "round(datum['expenditure_2023'] / 3)",
      "as": "icon_count"
    }
  ],
  "layer": [
    {
      "mark": {
        "type": "text",
        "align": "center",
        "baseline": "middle",
        "fontSize": 25
      },
      "encoding": {
        "x": {
          "field": "icon_pos",
          "type": "quantitative",
          "axis": {
            "title": "1 icon = 300,000,000 units",
            "domain": false,
            "labels": false,
            "ticks": false,
            "grid": false
          },
          "stack": null
        },
        "y": {
          "field": "visitor_expenditure",
          "type": "nominal",
          "axis": {
            "title": null,
            "domain": false,
            "labelLimit": 300,
            "ticks": false,
            "labelFontSize": 12
          },
          "sort": [
            "Shopping",
            "Accommodation",
            "Food & beverage",
            "Transport",
            "Purchase of automotive fuel ",
            "Pre-trip expenditure/tickets",
            "Other activities"
          ]
        },
        "text": {
          "value": " ðŸ’°"
        },
        "tooltip": [
          {
            "field": "visitor_expenditure",
            "type": "nominal",
            "title": "Category"
          },
          {
            "field": "expenditure_2023",
            "type": "quantitative",
            "title": "Expenditure (billions)",
            "format": ",.1f"
          }
        ]
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 30,
        "dy": 2
      },
      "encoding": {
        "x": {
          "aggregate": "max",
          "field": "icon_pos",
          "type": "quantitative"
        },
        "y": {
          "field": "visitor_expenditure",
          "type": "nominal"
        },
        "text": {
          "field": "icon_count",
          "type": "quantitative",
          "format": ","
        }
      }
    }
  ],
  "config": {
    "view": {
      "stroke": null
    }
  }
}
